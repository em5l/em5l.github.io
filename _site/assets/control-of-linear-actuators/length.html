<!DOCTYPE html>
<html lang="en-US"> <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/home/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/home/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(1)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/home/assets/js/vendor/lunr.min.js"></script> <script src="/home/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/home/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Movement Control | em5l</title> <meta name="generator" content="Jekyll v4.3.4"> <meta property="og:title" content="Movement Control"> <meta property="og:locale" content="en_US"> <meta name="description" content="Elektromekanik LAB Arşivi."> <meta property="og:description" content="Elektromekanik LAB Arşivi."> <link rel="canonical" href="https://em5l.github.io/home/assets/control-of-linear-actuators/length"> <meta property="og:url" content="https://em5l.github.io/home/assets/control-of-linear-actuators/length"> <meta property="og:site_name" content="em5l"> <meta property="og:type" content="website"> <meta name="twitter:card" content="summary"> <meta property="twitter:title" content="Movement Control"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Elektromekanik LAB Arşivi.","headline":"Movement Control","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://em5l.github.io/home/assets/images/Logo2Site.png"}},"url":"https://em5l.github.io/home/assets/control-of-linear-actuators/length"}</script> <!-- End Jekyll SEO tag --> <script>MathJax={"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]]},"svg":{"fontCache":"global"},"svg":{"fontCache":"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewbox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewbox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewbox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewbox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/home/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="em5l"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewbox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list">
<li class="nav-list-item"><a href="/home/" class="nav-list-link">Anasayfa</a></li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in Arşivlenen Dosyalar category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/home/assets" class="nav-list-link">Arşivlenen Dosyalar</a><ul class="nav-list">
<li class="nav-list-item"><a href="/home/assets/test-Cihazlari" class="nav-list-link">Test Cihazları Kullanım Kılavuzu</a></li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in Control of Linear Actuators category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/home/assets/control-of-linear-actuators" class="nav-list-link">Control of Linear Actuators</a><ul class="nav-list"><li class="nav-list-item"> <a href="/home/assets/control-of-linear-actuators/length" class="nav-list-link">Movement Control</a> </li></ul>
</li>
</ul>
</li>
</ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search em5l" aria-label="Search em5l" autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/em5l/home" class="site-button" target="_blank" rel="noopener noreferrer"> Dökümanlar </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/home/assets">Arşivlenen Dosyalar</a></li> <li class="breadcrumb-nav-list-item"><a href="/home/assets/control-of-linear-actuators">Control of Linear Actuators</a></li> <li class="breadcrumb-nav-list-item"><span>Movement Control</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><strong>Controlling Linear Actuator by Entering Length</strong></p> <p><strong>A4988 Stepper Motor Pins:</strong></p> <p><img src="media/image1.png" alt="" width="500in"></p> <p><strong>Vdd and GND:</strong> Should be connected to the 5v and GND parts of the Arduino.</p> <p><strong>Vmot and GND:</strong> Should be connected to 12 volt and GND to provide the 12 volt needed by the stepper motor.</p> <p><strong>1A,1B,2A,2B:</strong> Pins to which the stepper motor is connected.</p> <p><strong>Dır:</strong> Controls the direction of the motor.</p> <p><strong>Step:</strong> Controls the steps.</p> <p><strong>MS1, MS2, MS3:</strong> Microstep Selection Pins.</p> <p><strong>Sleep and Reset:</strong> When they are connected to each other, the controller becomes active.</p> <p><strong>En:</strong> When the Enable pin is active, the motor is grounded. We can limit the power usage by making this pin active and passive.</p> <div class="table-wrapper"><table> <tbody> <tr> <td>Micro step Mode</td> <td>MS1</td> <td>MS2</td> <td>MS3</td> </tr> <tr> <td>Full Step</td> <td>low</td> <td>low</td> <td>low</td> </tr> <tr> <td>Half Step</td> <td>high</td> <td>low</td> <td>low</td> </tr> <tr> <td>Quarter Step</td> <td>low</td> <td>high</td> <td>low</td> </tr> <tr> <td>Eighth Step</td> <td>high</td> <td>high</td> <td>low</td> </tr> <tr> <td>Sixteenth Step</td> <td>high</td> <td>high</td> <td>high</td> </tr> </tbody> </table></div> <p>For one revolution needed steps are calculated as;</p> <p>Full Step mode</p> <p>$$\frac{360}{1.8{^\circ}} = 200$$</p> <p>Half step;</p> <p>$$\frac{360}{0.9{^\circ}} = 400$$</p> <p>Quarter step;</p> <p>$$\frac{360}{0.45{^\circ}} = 800$$</p> <p>Eighth step;</p> <p>$$\frac{360}{0.225{^\circ}} = 1600$$</p> <p>Sixteenth step;</p> <p>$$\frac{360}{0.1125{^\circ}} = 3200$$</p> <p><strong>Stepper Motor Controller Connections:</strong></p> <p>Stepper motor model is: 17HS4401S</p> <p><img src="media/image2.png" alt="" width="600in"></p> <p><strong>Trapezoidal lead screw motion principle:</strong></p> <p><img src="media/image3.png" alt=""></p> <p>The screw rotates, the nut does not rotate, the nut moves along the screw.</p> <p><strong>Linear Actuator:</strong></p> <p>Linear actuators are created by properly combining the stepper motor and trapezoidal lead screw. With each step of the stepper motor, the part attached to the screw shaft moves by the length of the Lead. It is used to move a load back and forth.</p> <p>$$L = p × n_s$$</p> <p>$$L = Lead of thread.$$</p> <p>$$P = Thread pitch.$$</p> <p>$$n_s = Number of thread starts.$$</p> <p><strong>Length Calculation in Code:</strong></p> <p>$$toplamAdim = (mmFinal / 8) × stepsPerRevolution$$</p> <p>The specified 'stepsPerRevolution' is the number of steps required for the stepper motor to complete one revolution. The specified 'stepsPerRevolution' is the number of steps required for the stepper motor to complete one revolution.</p> <p>$$L = p × n_s$$ The number of 'starts' of the used shaft: $$n_s = 4$$</p> <p>Pitch value of shaft: $$p = 2$$</p> <p>Lead of thread is : $$L = 8$$</p> <p>So when the 'stepsPerRevolution' is completed, the shaft moves 8 mm. By multiplying the formula by 1/8, we ensure that the shaft moves 1 mm when the 'stepsPerRevolution' is completed. In this way, we can determine the 'mmFinal' value as the length we want our part to move and ensure that it moves at the desired length. When we equate this equation to the toplamAdim command, we obtain the number of steps the stepper motor must take to cover the specified distance.</p> <p><strong>T8 Trapezoidal lead screw:</strong></p> <p><img src="media/image4.png" alt="" width="500in"></p> <p><strong>Calculating the force created by the torque applied by the stepper motor on the shaft</strong></p> <p>In order to find the force created by the motor torque on the pushed part, we first need to know the structure of the shaft. Trapezoidal shafts are similar in structure to inclined planes. While inclined planes gain force, they also cause loss in distance.</p> <p><img src="media/image5.jpeg" alt="" width="500in"></p> <p><img src="media/image6.jpeg" alt="" width="500in"></p> <p>h = length of lead: 8 mm</p> <p>D = diameter: 8 mm</p> <p>C = Circumference: π $\times$ 8 = 25,13 mm</p> <p>Length of Helix: $\sqrt{25.13^{2} + 8^{2}}$ = 26,34 mm</p> <p><strong>Formula for converting stepper motor torque into force</strong></p> <p><img src="media/image7.jpg" alt="" width="500in"></p> <p><strong>Torque work formula and force work formula</strong></p> <p><img src="media/image8.jpg" alt="" width="500in"></p> <p><strong>Equality of the number of turns of the stepper motor and the shaft helix length</strong></p> <p><img src="media/image9.jpg" alt="" width="500in"></p> <p>$$T_M = Stepper motor torque: 430Nmm$$</p> <p>$$h = 8 mm$$</p> <p>$$sin(α) = h / length of helix = 0,304 mm =&gt; α = 18°$$</p> <p>$$T_M = (8F_N)/(2π) =&gt; T_M = 1,27F_N =&gt; F_N = 338,58 N$$</p> <p><img src="media/image10.jpeg" alt="" width="500in"></p> <p>$$F_T = F_N × sin(18) =&gt; F_T = 104,62 N$$</p> <p>$$F_Ö = F_N × cos(18) =&gt; F_Ö = 322.01 N$$</p> <p><img src="media/image11.jpeg" alt="" width="500in"></p> <p><strong>when friction force acts:</strong></p> <p>Real life systems are under the influence of friction force. In order for systems to move, they must be under the influence of a force large enough to overcome the friction force. The reason why the nut does not move on the non-moving nuts of trapezoidal shafts is that there is no force large enough to overcome the friction force. The situation where the force applied to the nut does not move the nut is called <strong>autoblocking.</strong></p> <p>autoblocking requirement:</p> <p><strong>α ≤ p</strong></p> <p><strong>Linear Actuator:</strong></p> <p><img src="media/image12.jpeg" alt="" width="500in"></p> <p><strong>Controlling Linear Actuator by Entering Length in Arduino Uno</strong> (The relationship between the motor torque and the force pushing the nut is also explained.)</p> <div class="code-example"> <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>#define dirPin 6
#define stepPin 7
#define controlPin 2
#define dirPin 6
#define stepPin 7
#define controlPin 2
#define MS1 3
#define MS2 4
#define MS3 5
#define stepsPerRevolution 200
#define joyX A0
#define joyY A1
double xValue;
double yValue; 
double toplamAdim;
#define mmFinal 50
int i;
int son;
double tMotor = 430 ; //stepper motor torque
double d = 8 ; //diameter
double h = 8 ; //lead
double circumference; 
double lengthOfHelix;
double fN; //force exerted by stepper motor
double fT; //nut turning force
double fA; //axial force
double angle; 
double value;
double angle2degree;

void setup(){
  pinMode(stepPin, OUTPUT); 
 pinMode(dirPin, OUTPUT); 
  pinMode(MS1, OUTPUT);
 pinMode(MS2, OUTPUT);
  pinMode(MS3, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // stepper motor torque force relationship formulas
  circumference = (3.1415 * d);
  lengthOfHelix = sqrt((pow(circumference,2) + pow(h,2)));
  value = h/lengthOfHelix;
  angle = asin(value);  // output is radian:
  angle2degree = (angle * 180)/ 3,1415;
  fN = (( tMotor * 2 * (3.1415))/ h); 
  fT = fN * sin(angle); // Input is radian:
  fA = fN * cos(angle); // Input is radian:

  Serial.print(" angle ");
  Serial.print(angle2degree);
  Serial.print("°");
  Serial.print(" fN value ");
  Serial.print(fN);
  Serial.print(" fT value ");
  Serial.print(fT);
  Serial.print(" fA value ");
  Serial.print(fA);

  // Microstep control settings:
 digitalWrite(MS1, LOW);
 digitalWrite(MS2, LOW);
 digitalWrite(MS3, LOW);
 toplamAdim = (mmFinal / 8) * stepsPerRevolution;
 

 // Set the spinning direction counterclockwise:
  
 if(mmFinal &gt; 0){
  digitalWrite(dirPin, HIGH); 
  if(son != 1){
   for( i = 0; i &lt; toplamAdim; i++){

   digitalWrite(stepPin, HIGH); 
   delayMicroseconds(2000); 
   digitalWrite(stepPin, LOW); 
   delayMicroseconds(2000); 
   son = 1;
    }
   }
  }
  if(mmFinal &lt; 0){
   // Set the spinning direction counterclockwise:
  digitalWrite(dirPin, LOW); 
   if(son != 1){
    for( i = 0; i &lt; -toplamAdim; i++){
    digitalWrite(stepPin, HIGH); 
    delayMicroseconds(2000); 
    digitalWrite(stepPin, LOW); 
    delayMicroseconds(2000); 
    son = 1;
    }
   }
  }
 }
</code></pre></div> </div> </div> </main> </div> </div> <button id="search-button" class="search-button btn-reset" aria-label="Focus on search"> <svg viewbox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </button> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
